@model WebMobileStore.Models.ChangePasswordViewModel
@{
    ViewData["Title"] = "Đổi mật khẩu";
}

<link rel="stylesheet" href="~/css/changepassword.css" asp-append-version="true" />

<div class="profile-container">
    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success">
            ✓ @TempData["Success"]
        </div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-error">
            ✗ @TempData["Error"]
        </div>
    }

    <div class="profile-layout">
        <!-- Sidebar -->
        <div class="profile-sidebar">
            <div class="profile-avatar-section">
                <img src="~/image/icons8-account-48.png" alt="Avatar" class="profile-avatar-large" />
                <div class="profile-name">@User.Identity.Name</div>
                <div class="profile-email">@User.FindFirst(System.Security.Claims.ClaimTypes.Email)?.Value</div>
            </div>
            <ul class="profile-menu">
                <li>
                    <a href="@Url.Action("Profile", "User")">
                        <span>👤</span> Thông tin tài khoản
                    </a>
                </li>
                <li>
                    <a asp-controller="Order" asp-action="CheckOut">
                        <span>💳</span> Đơn hàng
                    </a>
                </li>
                <li>
                    <a asp-controller="User" asp-action="ChangePassword">
                        <span>🔒</span> Đổi mật khẩu
                    </a>

                </li>
                <li>
                    <a href="@Url.Action("Logout", "User")">
                        <span>🚪</span> Đăng xuất
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="profile-content">
            <div class="profile-header">
                <h2>Đổi mật khẩu</h2>
            </div>

            <div class="change-password-form">
                <form asp-controller="User" asp-action="ChangePassword" method="post" autocomplete="off">
                    <div asp-validation-summary="ModelOnly" class="validation-summary"></div>

                    <div class="field">
                        <label asp-for="CurrentPassword" class="req">Mật khẩu hiện tại</label>
                        <input asp-for="CurrentPassword" type="password" class="form-input" placeholder="Nhập mật khẩu hiện tại" />
                        <span asp-validation-for="CurrentPassword" class="text-danger"></span>
                    </div>

                    <div class="field">
                        <label asp-for="NewPassword" class="req">Mật khẩu mới</label>
                        <input asp-for="NewPassword" type="password" class="form-input" placeholder="Nhập mật khẩu mới" />
                        <span asp-validation-for="NewPassword" class="text-danger"></span>
                        <small class="field-hint">Mật khẩu phải có ít nhất 6 ký tự</small>
                    </div>

                    <div class="field">
                        <label asp-for="ConfirmPassword" class="req">Xác nhận mật khẩu mới</label>
                        <input asp-for="ConfirmPassword" type="password" class="form-input" placeholder="Nhập lại mật khẩu mới" />
                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                    </div>

                    <div class="form-actions">
                        <a href="@Url.Action("Profile", "User")" class="btn-cancel">Hủy</a>
                        <button type="submit" class="btn-submit">Đổi mật khẩu</button>
                    </div>
                </form>

                <div class="password-tips">
                    <h3>💡 Gợi ý tạo mật khẩu mạnh:</h3>
                    <ul>
                        <li>Sử dụng ít nhất 8 ký tự</li>
                        <li>Kết hợp chữ hoa, chữ thường, số và ký tự đặc biệt</li>
                        <li>Không sử dụng thông tin cá nhân dễ đoán</li>
                        <li>Không dùng lại mật khẩu cũ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}