@model WebMobileStore.Models.Entity.Products

<div class="product-card" data-product-id="@Model.ProductId">
    @* Badge Trả góp nằm góc phải trên cùng của thẻ, không chồng ảnh *@
    <div class="installment-badge">Trả góp 0%</div>

    <div class="product-image">
        @if (Model.ProductImages != null && Model.ProductImages.Any())
        {
            <img src="@Model.ProductImages.FirstOrDefault()?.ImageUrl" alt="@Model.ProductsName" />
        }
        else
        {
            <img src="~/images/no-image.png" alt="@Model.ProductsName" />
        }

        @if (Model.ProductVariants != null && Model.ProductVariants.Any())
        {
            var discount = Model.ProductVariants.FirstOrDefault()?.CompareAtPrice;
            if (discount.HasValue && discount.Value > Model.Price)
            {
                var percentOff = Math.Round((discount.Value - Model.Price) / discount.Value * 100);
                <div class="discount-badge">-@percentOff%</div>
            }
        }
    </div>

    <div class="product-info">
        <h3 class="product-name">@Model.ProductsName</h3>
        <div class="product-price">@string.Format("{0:N0} ₫", Model.Price)</div>
        <div class="product-rating">⭐⭐⭐⭐⭐ <span>(4.5)</span></div>
    </div>
</div>
