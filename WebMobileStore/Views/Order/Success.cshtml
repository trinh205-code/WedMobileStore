@model WebMobileStore.Models.Entity.Orders
@{
    ViewBag.Title = "Đặt hàng thành công";
    Layout = "_ShopLayout";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Sucess.css" />
}

<div class="order-success">
    <div class="order-success__container">
        <!-- Icon thành công -->
        <div class="order-success__icon">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="#10B981" stroke-width="2" fill="#D1FAE5" />
                <path d="M8 12L11 15L16 9" stroke="#10B981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </div>

        <!-- Tiêu đề -->
        <h1 class="order-success__title">Đặt hàng thành công!</h1>
        <p class="order-success__subtitle">Cảm ơn bạn đã mua hàng tại TechStore</p>

        <!-- Thông tin đơn hàng -->
        <div class="order-success__info">
            <div class="info-card">
                <div class="info-row">
                    <span class="info-label">Mã đơn hàng:</span>
                    <span class="info-value">#@Model.OrdersId</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Ngày đặt hàng:</span>
                    <span class="info-value">@Model.OrderdAt.ToString("dd/MM/yyyy HH:mm")</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Trạng thái:</span>
                    <span class="badge badge-pending">Chờ xác nhận</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Địa chỉ giao hàng:</span>
                    <span class="info-value">@Model.Address</span>
                </div>
            </div>
        </div>

        <!-- Chi tiết sản phẩm -->
        <div class="order-success__products">
            <h3 class="section-title">Chi tiết đơn hàng</h3>
            <div class="product-list">
                @foreach (var item in Model.OrderDetails)
                {
                    <div class="product-item">
                        <div class="product-info">
                            <span class="product-name">@item.ProductName</span>
                            <span class="product-variant">@item.Color / @item.Storage</span>
                        </div>
                        <div class="product-quantity">x@item.Quantity</div>
                        <div class="product-price">@item.TotalPrice.ToString("N0")đ</div>
                    </div>
                }
            </div>
        </div>

        <!-- Tổng tiền -->
        <div class="order-success__summary">
            <div class="summary-row">
                <span>Tạm tính:</span>
                <span>@((Model.TotalAmount - Model.ShippingFee).ToString("N0"))đ</span>
            </div>
            <div class="summary-row">
                <span>Phí vận chuyển:</span>
                <span>@Model.ShippingFee.ToString("N0")đ</span>
            </div>
            @if (Model.DiscountAmount > 0)
            {
                <div class="summary-row">
                    <span>Giảm giá:</span>
                    <span class="text-danger">-@Model.DiscountAmount.ToString("N0")đ</span>
                </div>
            }
            <div class="summary-row summary-total">
                <span>Tổng cộng:</span>
                <span>@Model.TotalAmount.ToString("N0")đ</span>
            </div>
        </div>

        <!-- Thông báo -->
        <div class="order-success__notice">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="#3B82F6" stroke-width="2" />
                <path d="M12 8V12M12 16H12.01" stroke="#3B82F6" stroke-width="2" stroke-linecap="round" />
            </svg>
            <p>Đơn hàng của bạn đang được xử lý. Chúng tôi sẽ liên hệ với bạn trong thời gian sớm nhất.</p>
        </div>

        <!-- Nút hành động -->
        <div class="order-success__actions">
            <a asp-controller="Shop" asp-action="Index" class="btn btn-secondary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                Tiếp tục mua sắm
            </a>
            <a asp-controller="User" asp-action="Orders" class="btn btn-primary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5" stroke="currentColor" stroke-width="2" />
                </svg>
                Xem đơn hàng
            </a>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
    // Hiệu ứng pháo hoa khi load trang
    window.addEventListener('load', function() {
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
        });
    });
</script>